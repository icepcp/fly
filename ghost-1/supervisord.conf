[supervisord]
nodaemon=true
pidfile=/var/run/supervisord.pid
logfile=/dev/stdout
logfile_maxbytes=0          ; <-- must be 0 when logging to stdout
loglevel=info

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[program:ghost]
directory=/var/lib/ghost
command=/usr/local/bin/node current/index.js
user=node
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1     ; log to container stdout
stdout_logfile_maxbytes=0    ; <-- disable rotation
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0

[program:caddy]
command=/usr/bin/caddy run --config /etc/caddy/Caddyfile --adapter caddyfile
user=node                    ; if you gave caddy cap_net_bind_service, else remove
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
